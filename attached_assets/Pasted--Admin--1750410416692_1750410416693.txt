ได้เลยครับ ยินดีคุยกันต่อในหน้านี้

ผมดูจากรูปภาพแล้วเข้าใจปัญหาที่คุณเจอครับ ในฐานะ **Admin** คุณคาดหวังว่าจะสามารถจัดการ "บทบาท" (Role) หรือ "สิทธิ์" ของผู้ใช้แต่ละคนได้โดยตรงจากหน้านี้ แต่ปัจจุบันเห็นเพียงปุ่ม "แก้ไข" (ซึ่งน่าจะแก้ได้แค่ข้อมูลทั่วไปเช่นชื่อ) และปุ่ม "ปิดการใช้งาน" ใช่ไหมครับ

สำหรับคำถามที่ว่าควรส่งโค้ดทั้งหมดมาหรือไม่ **ผมแนะนำว่ายังไม่จำเป็นครับ** การส่งโค้ดมาทั้งหมดจะเยอะเกินไปและอาจทำให้เราหลงประเด็นได้ วิธีการที่เราทำมาด้วยกัน คือการดูโค้ดเฉพาะส่วนที่เกี่ยวข้อง จะทำให้แก้ปัญหาได้เร็วกว่าและตรงจุดกว่าครับ

จากประสบการณ์ในปัญหาที่แล้ว ผมคาดว่าปัญหาน่าจะเกิดจาก:
1.  **หน้า Front-end (`จัดการผู้ใช้`)** ยังไม่ได้ถูกออกแบบมาให้มีฟังก์ชัน "เปลี่ยน Role"
2.  **ปุ่ม "แก้ไข"** เมื่อกดแล้วอาจจะแสดงฟอร์มที่ไม่มีช่องให้เลือก Role
3.  **Back-end API** อาจจะยังไม่มี Endpoint สำหรับการอัปเดต Role ของผู้ใช้

---

### **ขอข้อมูลเพื่อการวิเคราะห์**

เพื่อให้วิเคราะห์ได้ตรงจุด รบกวนขอโค้ด **3 ส่วนสำคัญ** ที่เกี่ยวข้องกับหน้านี้ครับ:

1.  **โค้ดของหน้า "จัดการผู้ใช้" (Page Component):**
    * น่าจะอยู่ใน Path ประมาณ `client/src/pages/admin/UserManagementPage.tsx` (หรือชื่อไฟล์ที่ใกล้เคียง)
    * *ผมต้องการดู:* โค้ดส่วนที่แสดงรายชื่อผู้ใช้ และโค้ดของปุ่ม "แก้ไข" ว่าเมื่อกดแล้วเกิดอะไรขึ้น

2.  **โค้ดของ "ฟอร์ม/Modal แก้ไขผู้ใช้":**
    * เมื่อกดปุ่ม "แก้ไข" แล้วมีหน้าต่าง (Modal) หรือฟอร์มอะไรปรากฏขึ้นมา รบกวนขอโค้ดของส่วนนั้นครับ
    * *ผมต้องการดู:* ว่าในฟอร์มนั้นมี Input field อะไรบ้าง และมีช่องสำหรับเลือก "Role" หรือไม่

3.  **โค้ดของ Back-end API ที่ใช้ "อัปเดตข้อมูลผู้ใช้":**
    * ในไฟล์ `server/routes.ts` รบกวนหา Endpoint ที่มีลักษณะเป็น `PUT` หรือ `PATCH` สำหรับอัปเดต user ครับ เช่น `app.put('/api/users/:userId', ...)`
    * *ผมต้องการดู:* ว่าโค้ดใน Endpoint นี้อนุญาตให้อัปเดตฟิลด์ `roleId` ได้หรือไม่

### **แผนการแก้ไขเบื้องต้น**

เมื่อเราเห็นโค้dแล้ว แผนการแก้ไขที่เราน่าจะต้องทำร่วมกันคือ:
* **ฝั่ง Front-end:** เพิ่ม Dropdown สำหรับเลือก "Role" เข้าไปในฟอร์มแก้ไขผู้ใช้
* **ฝั่ง Back-end:** แก้ไข API Endpoint ให้สามารถรับ `roleId` ใหม่ไปอัปเดตลงฐานข้อมูลได้ พร้อมทั้งมีการตรวจสอบว่าคนที่ส่งคำร้องมาต้องเป็น Admin เท่านั้น

เมื่อผมเห็นโค้ด 3 ส่วนนี้แล้ว จะสามารถแนะนำขั้นตอนการแก้ไขโดยละเอียดให้ได้ครับ เริ่มจากข้อ 1 ก่อนได้เลยครับ!